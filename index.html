<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/favicon.png">
    <title>Pusat Kuis Interaktif</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700;900&family=Fredoka+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/style/style.css">
</head>
<body>
    <div class="container">
        <div class="stars">⭐✨🌟</div>
        
        <h1>📚 Pusat Kuis Interaktif 📚</h1>
        
        <p class="welcome-text">
            Halo adik-adik! Selamat datang di dunia belajar yang menyenangkan! 🎉<br>
            Ayo masukkan namamu dan pilih mata pelajaran untuk memulai petualangan belajar!
        </p>

        <div class="name-section">
            <label class="name-label" for="name-input">🎯 Siapa namamu?</label>
            <input type="text" id="name-input" placeholder="Tulis nama lengkapmu di sini...">
            <div id="error-message" class="error-message">
                🚫 Jangan lupa tulis namamu dulu ya!
            </div>
        </div>

        <div class="subjects-section">
            <h2 class="section-title">🎨 Pilih Mata Pelajaran Favoritmu!</h2>
            <div class="subject-buttons">
                <button class="subject-btn" onclick="selectSubject('ipas')">
                    <span class="subject-icon">🌳</span>
                    <span>Ilmu Pengetahuan Alam dan Sosial</span>
                </button>
                <button class="subject-btn" onclick="selectSubject('bahasa_inggris')">
                    <span class="subject-icon">🌍</span>
                    <span>Bahasa Inggris</span>
                </button>
                <button class="subject-btn" onclick="selectSubject('pendidikan_pancasila')">
                    <span class="subject-icon">🏛</span>
                    <span>Pendidikan Pancasila</span>
                </button>
            </div>
            
        </div>

        <div class="report-section">
            <a href="templates/report.html" class="report-btn">
                📊 Lihat Laporan Belajarku
            </a>
        </div>
    </div>

    <script>
        const nameInput = document.getElementById('name-input');
        const errorMessage = document.getElementById('error-message');

        // Jika sudah ada nama, tampilkan kembali
        const savedName = localStorage.getItem('quizUsername');
        if (savedName) {
            nameInput.value = savedName;
        }

        // Sembunyikan pesan error ketika user mulai mengetik
        nameInput.addEventListener('input', function() {
            errorMessage.style.display = 'none';
        });

        function selectSubject(subjectKey) {
            const username = nameInput.value.trim();
            
            if (username === '') {
                errorMessage.style.display = 'block';
                nameInput.focus();
                
                // Tambahkan efek highlight pada input
                nameInput.style.borderColor = '#e53e3e';
                nameInput.style.boxShadow = '0 0 0 4px rgba(229, 62, 62, 0.1)';
                
                setTimeout(() => {
                    nameInput.style.borderColor = '#e2e8f0';
                    nameInput.style.boxShadow = 'inset 0 2px 4px rgba(0, 0, 0, 0.05)';
                }, 3000);
                
                return;
            }

            // Simpan nama ke localStorage
            localStorage.setItem('quizUsername', username);
            
            // Tambahkan efek loading sebelum pindah halaman
            const button = event.target.closest('.subject-btn');
            button.innerHTML = '<span style="animation: spin 1s linear infinite;">⏳</span> Memuat...';
            
            // Pindah ke halaman chapters setelah delay singkat
            setTimeout(() => {
                window.location.href = `templates/chapters.html?subject=${subjectKey}`;
            }, 500);
        }

        // Tambahkan animasi CSS untuk loading spinner
        const style = document.createElement('style');
        style.textContent = `
            @keyframes spin {
                from { transform: rotate(0deg); }
                to { transform: rotate(360deg); }
            }
        `;
        document.head.appendChild(style);

        // Enter key support
        nameInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                document.querySelector('.subject-btn').click();
            }
        });
    </script>
</body>
</html>